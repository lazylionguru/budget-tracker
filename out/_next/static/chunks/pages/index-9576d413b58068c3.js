(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1834)}])},1834:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var l=s(5893),a=s(7294),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var i=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:d,...c},u)=>(0,a.createElement)("svg",{ref:u,...r,width:l,height:l,stroke:s,strokeWidth:o?24*Number(i)/Number(l):i,className:`lucide lucide-${n(e)}`,...c},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(d)?d:[d])||[]]));return s.displayName=`${e}`,s};let o=i("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),d=i("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c=i("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),u=i("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var m=()=>{let[e,t]=(0,a.useState)("expenses"),[s,r]=(0,a.useState)([]),[n,i]=(0,a.useState)(null),[m,h]=(0,a.useState)([]),[x,g]=(0,a.useState)(""),[b,p]=(0,a.useState)(!1),[y,f]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[v,w]=(0,a.useState)(null),[k,S]=(0,a.useState)("monthly"),C=["Groceries","Restaurants","Transportation","Utilities","Entertainment","Shopping","Healthcare","Cigarettes","Other"];(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("households")||"[]"),t=JSON.parse(localStorage.getItem("expenses")||"[]"),s=localStorage.getItem("userName")||"",l=localStorage.getItem("currentHousehold");if(r(e),h(t),g(s),l){let t=e.find(e=>e.id===l);t&&i(t)}},[]);let E=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},D=()=>Math.floor(1e5+9e5*Math.random()).toString(),I=(e,t)=>{let s=m.filter(e=>e.householdId===t),l={};s.forEach(e=>{e.description.toLowerCase().split(" ").forEach(t=>{t.length>2&&(l[t]||(l[t]={}),l[t][e.category]=(l[t][e.category]||0)+1)})});let a=e.toLowerCase().split(" "),r={};if(a.forEach(e=>{l[e]&&Object.entries(l[e]).forEach(e=>{let[t,s]=e;r[t]=(r[t]||0)+s})}),Object.keys(r).length>0)return Object.entries(r).sort((e,t)=>t[1]-e[1])[0][0];let n=e.toLowerCase();return n.includes("walmart")||n.includes("grocery")||n.includes("food")?"Groceries":n.includes("restaurant")||n.includes("cafe")||n.includes("pizza")?"Restaurants":n.includes("uber")||n.includes("gas")||n.includes("fuel")?"Transportation":n.includes("electric")||n.includes("water")||n.includes("internet")?"Utilities":n.includes("movie")||n.includes("netflix")||n.includes("game")?"Entertainment":n.includes("cigarette")||n.includes("smoke")||n.includes("tobacco")?"Cigarettes":"Other"},M=e=>{if(!x.trim()){alert("Please enter your name first");return}let t={id:Date.now().toString(),name:e.trim(),inviteCode:D(),members:[x.trim()],createdBy:x.trim(),createdAt:new Date().toISOString()},l=[...s,t];r(l),i(t),E("households",l),localStorage.setItem("currentHousehold",t.id),localStorage.setItem("userName",x.trim()),N(!1)},O=e=>{if(!x.trim()){alert("Please enter your name first");return}let t=s.find(t=>t.inviteCode===e.trim());if(!t){alert("Invalid invite code");return}if(!t.members.includes(x.trim())){t.members.push(x.trim());let e=s.map(e=>e.id===t.id?t:e);r(e),E("households",e)}i(t),localStorage.setItem("currentHousehold",t.id),localStorage.setItem("userName",x.trim()),f(!1)},T=(e,t,s,l,a)=>{let r=[...m,{id:Date.now().toString(),householdId:n.id,amount:parseFloat(e),description:t.trim(),category:s,date:l,user:a,createdAt:new Date().toISOString()}];h(r),E("expenses",r),p(!1)},_=(0,a.useMemo)(()=>n?m.filter(e=>e.householdId===n.id).sort((e,t)=>new Date(t.date)-new Date(e.date)):[],[m,n]),A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"daily";if(!_.length)return[];let t={};return _.forEach(s=>{let l;let a=new Date(s.date);t[l="daily"===e?a.toISOString().split("T")[0]:"".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"))]||(t[l]={date:l,total:0,count:0,expenses:[]}),t[l].total+=s.amount,t[l].count+=1,t[l].expenses.push(s)}),Object.values(t).sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(-30)},F=()=>{if(!_.length)return{byUser:[],byCategory:[],total:0};let e=new Date,t=new Date(e);if("weekly"===k){let s=0===e.getDay()?7:e.getDay();t.setDate(e.getDate()-s+1)}else t.setDate(1);t.setHours(0,0,0,0);let s=_.filter(e=>new Date(e.date)>=t),l={},a={},r=0;return s.forEach(e=>{l[e.user]||(l[e.user]=0),l[e.user]+=e.amount,a[e.category]||(a[e.category]=0),a[e.category]+=e.amount,r+=e.amount}),{byUser:Object.entries(l).map(e=>{let[t,s]=e;return{user:t,amount:s}}).sort((e,t)=>t.amount-e.amount),byCategory:Object.entries(a).map(e=>{let[t,s]=e;return{category:t,amount:s}}).sort((e,t)=>t.amount-e.amount),total:r,period:k}};return n?(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsxs)("div",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"font-bold text-lg",children:n.name}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[n.members.length," member",1!==n.members.length?"s":""]})]}),(0,l.jsx)("button",{onClick:()=>p(!0),className:"bg-blue-500 text-white p-2 rounded-full hover:bg-blue-600 transition-colors",children:(0,l.jsx)(d,{className:"w-6 h-6"})})]}),(0,l.jsxs)("div",{className:"pb-16",children:["expenses"===e&&(0,l.jsx)(()=>{var e;let t=A("daily"),s=A("monthly"),[r,i]=(0,a.useState)("daily"),o="daily"===r?t:s,d=Math.max(...o.map(e=>e.total),1),c=e=>{let t=new Date(e);return"daily"===r?t.toLocaleDateString("en-US",{month:"short",day:"numeric"}):t.toLocaleDateString("en-US",{month:"short",year:"numeric"})};return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold",children:null==n?void 0:n.name}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["Code: ",null==n?void 0:n.inviteCode]})]}),(0,l.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,l.jsx)("button",{onClick:()=>i("daily"),className:"px-3 py-1 rounded-full text-sm ".concat("daily"===r?"bg-blue-500 text-white":"bg-gray-200"),children:"Daily"}),(0,l.jsx)("button",{onClick:()=>i("monthly"),className:"px-3 py-1 rounded-full text-sm ".concat("monthly"===r?"bg-blue-500 text-white":"bg-gray-200"),children:"Monthly"})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:(0,l.jsx)("div",{className:"flex items-end space-x-1 h-32 overflow-x-auto",children:o.map((e,t)=>{let s=e.total/d*100;return(0,l.jsxs)("div",{className:"flex flex-col items-center min-w-0 flex-1",onClick:()=>w(v===e.date?null:e.date),children:[(0,l.jsx)("div",{className:"w-full bg-blue-500 hover:bg-blue-600 cursor-pointer rounded-t transition-colors ".concat(v===e.date?"bg-blue-700":""),style:{height:"".concat(Math.max(s,4),"%")}}),(0,l.jsx)("div",{className:"text-xs mt-1 text-center text-gray-600 transform -rotate-45 origin-center",children:c(e.date)})]},e.date)})})}),v&&(0,l.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:[(0,l.jsxs)("h3",{className:"font-bold mb-2",children:["daily"===r?"Day":"Month"," Details - ",c(v)]}),null===(e=o.find(e=>e.date===v))||void 0===e?void 0:e.expenses.map(e=>(0,l.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.description}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[e.category," • ",e.user]})]}),(0,l.jsxs)("div",{className:"font-bold",children:["$",e.amount.toFixed(2)]})]},e.id))]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-bold mb-2",children:"Recent Expenses"}),_.slice(0,10).map(e=>(0,l.jsxs)("div",{className:"flex justify-between items-center py-2 border-b last:border-b-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.description}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:[e.category," • ",e.user," • ",new Date(e.date).toLocaleDateString()]})]}),(0,l.jsxs)("div",{className:"font-bold",children:["$",e.amount.toFixed(2)]})]},e.id))]})]})},{}),"insights"===e&&(0,l.jsx)(()=>{let e=F();return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold",children:"Insights"}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>S("weekly"),className:"px-3 py-1 rounded-full text-sm ".concat("weekly"===k?"bg-blue-500 text-white":"bg-gray-200"),children:"Weekly"}),(0,l.jsx)("button",{onClick:()=>S("monthly"),className:"px-3 py-1 rounded-full text-sm ".concat("monthly"===k?"bg-blue-500 text-white":"bg-gray-200"),children:"Monthly"})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:[(0,l.jsxs)("h3",{className:"font-bold mb-2",children:["Total ","weekly"===e.period?"This Week":"This Month"]}),(0,l.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",e.total.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-bold mb-3",children:"Expenses by User"}),e.byUser.map(e=>(0,l.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(o,{className:"w-4 h-4 mr-2 text-gray-500"}),(0,l.jsx)("span",{children:e.user})]}),(0,l.jsxs)("div",{className:"font-bold",children:["$",e.amount.toFixed(2)]})]},e.user))]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,l.jsx)("h3",{className:"font-bold mb-3",children:"Expenses by Category"}),e.byCategory.map(t=>{let s=e.total>0?t.amount/e.total*100:0;return(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,l.jsx)("span",{children:t.category}),(0,l.jsxs)("span",{className:"font-bold",children:["$",t.amount.toFixed(2)]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})}),(0,l.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[s.toFixed(1),"%"]})]},t.category)})]})]})},{})]}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("button",{onClick:()=>t("expenses"),className:"flex-1 p-4 flex flex-col items-center space-y-1 ".concat("expenses"===e?"text-blue-500":"text-gray-500"),children:[(0,l.jsx)(c,{className:"w-5 h-5"}),(0,l.jsx)("span",{className:"text-xs",children:"Expenses"})]}),(0,l.jsxs)("button",{onClick:()=>t("insights"),className:"flex-1 p-4 flex flex-col items-center space-y-1 ".concat("insights"===e?"text-blue-500":"text-gray-500"),children:[(0,l.jsx)(u,{className:"w-5 h-5"}),(0,l.jsx)("span",{className:"text-xs",children:"Insights"})]})]})}),b&&(0,l.jsx)(()=>{let[e,t]=(0,a.useState)(""),[s,r]=(0,a.useState)(""),[i,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(new Date().toISOString().split("T")[0]);return(0,a.useEffect)(()=>{s&&n&&o(I(s,n.id))},[s]),(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Add Expense"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("input",{type:"number",step:"0.01",placeholder:"Amount",value:e,onChange:e=>t(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg",required:!0}),(0,l.jsx)("input",{type:"text",placeholder:"What was it for?",value:s,onChange:e=>r(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg",required:!0}),(0,l.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select category"}),C.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsx)("input",{type:"date",value:d,onChange:e=>c(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg"}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>p(!1),className:"flex-1 bg-gray-300 text-gray-700 p-2 rounded-lg",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{e&&s&&i&&(T(e,s,i,d,x),t(""),r(""),o(""),c(new Date().toISOString().split("T")[0]))},className:"flex-1 bg-blue-500 text-white p-2 rounded-lg",children:"Add"})]})]})]})})},{})]}):(0,l.jsx)(()=>{let[e,t]=(0,a.useState)(x);return(0,l.jsxs)("div",{className:"p-6 max-w-md mx-auto",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Budget Tracker"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Track expenses with your household"})]}),(0,l.jsx)("div",{className:"space-y-4 mb-6",children:(0,l.jsx)("input",{type:"text",placeholder:"Enter your name",value:e,onChange:e=>{t(e.target.value),g(e.target.value)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("button",{onClick:()=>N(!0),className:"w-full bg-blue-500 text-white p-3 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Create New Household"}),(0,l.jsx)("button",{onClick:()=>f(!0),className:"w-full bg-gray-500 text-white p-3 rounded-lg font-medium hover:bg-gray-600 transition-colors",children:"Join Household"})]}),j&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Create Household"}),(0,l.jsx)("input",{type:"text",placeholder:"Enter household name",className:"w-full p-3 border border-gray-300 rounded-lg mb-4",onKeyDown:e=>{"Enter"===e.key&&e.target.value.trim()&&M(e.target.value)},autoFocus:!0}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>N(!1),className:"flex-1 bg-gray-300 text-gray-700 p-2 rounded-lg",children:"Cancel"}),(0,l.jsx)("button",{onClick:e=>{let t=e.target.parentElement.parentElement.querySelector("input");t.value.trim()&&M(t.value)},className:"flex-1 bg-blue-500 text-white p-2 rounded-lg",children:"Create"})]})]})}),y&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Join Household"}),(0,l.jsx)("input",{type:"text",placeholder:"Enter 6-digit invite code",maxLength:"6",className:"w-full p-3 border border-gray-300 rounded-lg mb-4 text-center text-lg font-mono",onKeyDown:e=>{"Enter"===e.key&&6===e.target.value.trim().length&&O(e.target.value)},autoFocus:!0}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>f(!1),className:"flex-1 bg-gray-300 text-gray-700 p-2 rounded-lg",children:"Cancel"}),(0,l.jsx)("button",{onClick:e=>{let t=e.target.parentElement.parentElement.querySelector("input");6===t.value.trim().length&&O(t.value)},className:"flex-1 bg-blue-500 text-white p-2 rounded-lg",children:"Join"})]})]})})]})},{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);